import{s as D,c as x,S as c,a as R}from"./index-5538bbd8.js";import{o9 as h,oa as E,aA as H,d as A,ax as F,A as C,o as I,nK as M,E as P,f as U,V as v,aD as $}from"./index-ca48b553.js";function b(n,t,r){n=h(n),t=E(t);var e=t?D(n):0;return t&&e<t?x(t-e,r)+n:n}var y=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function L(n,t){var r=n,e=/\[[^\]]*]/g,d=(t.match(e)||[]).map(function(i){return i.slice(1,-1)}),o=t.replace(e,"[]"),m=y.reduce(function(i,l){var w=H(l,2),p=w[0],u=w[1];if(i.indexOf(p)!==-1){var a=Math.floor(r/u);return r-=a*u,i.replace(new RegExp("".concat(p,"+"),"g"),function(f){var g=f.length;return b(a.toString(),g,"0")})}return i},o),s=0;return m.replace(e,function(){var i=d[s];return s+=1,i})}function N(n,t){var r=t.format,e=r===void 0?"":r,d=new Date(n).getTime(),o=Date.now(),m=Math.max(d-o,0);return L(m,e)}var O=1e3/30;function T(n){return new Date(n).getTime()}var V=function(){return v(v({},R()),{},{value:[Number,String,Object],format:String,onFinish:Function,onChange:Function})};const _=A({compatConfig:{MODE:3},name:"AStatisticCountdown",props:F(V(),{format:"HH:mm:ss"}),setup:function(t,r){var e=r.emit,d=r.slots,o=C(),m=C(),s=function(){var a=t.value,f=T(a);f>=Date.now()?i():l()},i=function(){if(!o.value){var a=T(t.value);o.value=setInterval(function(){m.value.$forceUpdate(),a>Date.now()&&e("change",a-Date.now()),s()},O)}},l=function(){var a=t.value;if(o.value){clearInterval(o.value),o.value=void 0;var f=T(a);f<Date.now()&&e("finish")}},w=function(a){var f=a.value,g=a.config,S=t.format;return N(f,v(v({},g),{},{format:S}))},p=function(a){return a};return I(function(){s()}),M(function(){s()}),P(function(){l()}),function(){var u=t.value;return U(c,v({ref:m},v(v({},$(t,["onFinish","onChange"])),{},{value:u,valueRender:p,formatter:w})),d)}}});c.Countdown=_;c.install=function(n){return n.component(c.name,c),n.component(c.Countdown.name,c.Countdown),n};c.Countdown;
//# sourceMappingURL=index-06c1f164.js.map
