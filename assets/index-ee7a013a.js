import{s as D,c as R,S as c,a as h}from"./index-1ca2d630.js";import{oa as x,ob as H,az as E,d as F,aw as I,r as S,o as M,nL as P,z as b,g as L,S as v,aC as U}from"./index-1998b52d.js";function $(n,t,r){n=x(n),t=H(t);var e=t?D(n):0;return t&&e<t?R(t-e,r)+n:n}var y=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function z(n,t){var r=n,e=/\[[^\]]*]/g,d=(t.match(e)||[]).map(function(i){return i.slice(1,-1)}),o=t.replace(e,"[]"),m=y.reduce(function(i,l){var w=E(l,2),p=w[0],u=w[1];if(i.indexOf(p)!==-1){var a=Math.floor(r/u);return r-=a*u,i.replace(new RegExp("".concat(p,"+"),"g"),function(f){var g=f.length;return $(a.toString(),g,"0")})}return i},o),s=0;return m.replace(e,function(){var i=d[s];return s+=1,i})}function A(n,t){var r=t.format,e=r===void 0?"":r,d=new Date(n).getTime(),o=Date.now(),m=Math.max(d-o,0);return z(m,e)}var N=1e3/30;function C(n){return new Date(n).getTime()}var O=function(){return v(v({},h()),{},{value:[Number,String,Object],format:String,onFinish:Function,onChange:Function})};const _=F({compatConfig:{MODE:3},name:"AStatisticCountdown",props:I(O(),{format:"HH:mm:ss"}),setup:function(t,r){var e=r.emit,d=r.slots,o=S(),m=S(),s=function(){var a=t.value,f=C(a);f>=Date.now()?i():l()},i=function(){if(!o.value){var a=C(t.value);o.value=setInterval(function(){m.value.$forceUpdate(),a>Date.now()&&e("change",a-Date.now()),s()},N)}},l=function(){var a=t.value;if(o.value){clearInterval(o.value),o.value=void 0;var f=C(a);f<Date.now()&&e("finish")}},w=function(a){var f=a.value,g=a.config,T=t.format;return A(f,v(v({},g),{},{format:T}))},p=function(a){return a};return M(function(){s()}),P(function(){s()}),b(function(){l()}),function(){var u=t.value;return L(c,v({ref:m},v(v({},U(t,["onFinish","onChange"])),{},{value:u,valueRender:p,formatter:w})),d)}}});c.Countdown=_;c.install=function(n){return n.component(c.name,c),n.component(c.Countdown.name,c.Countdown),n};c.Countdown;
//# sourceMappingURL=index-ee7a013a.js.map
